-- 회원 테이블
CREATE TABLE STUDY_MEMBER(
    MEMBER_ID NUMBER PRIMARY KEY,
    EMAIL VARCHAR2(100) NOT NULL UNIQUE,
    PWD VARCHAR2(100) NOT NULL,
    NICKNAME VARCHAR2(100) NOT NULL,
    REG_DATE TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);
-- 회원 테이블 ID 시퀸스 
CREATE SEQUENCE SEQ_STUDY_MEMBER START WITH 1 INCREMENT BY 1 NOCACHE;
CREATE OR REPLACE TRIGGER TRG_STUDY_MEMBER_ID
BEFORE INSERT ON STUDY_MEMBER FOR EACH ROW
BEGIN
    IF :NEW.MEMBER_ID IS NULL THEN
    SELECT SEQ_STUDY_MEMBER.NEXTVAL INTO :NEW.MEMBER_ID FROM DUAL;
    END IF;
END;
/
SELECT sequence_name FROM user_sequences WHERE sequence_name = 'SEQ_STUDY_MEMBER';

SELECT * FROM STUDY_MEMBER;

INSERT INTO STUDY_MEMBER (MEMBER_ID, EMAIL, PWD, NICKNAME) VALUES(SEQ_STUDY_MEMBER.nextval, 'A1234', 'A12345', 'TESTA1');

commit;
// 테스트 목록
SELECT * FROM STUDY_MEMBER WHERE NICKNAME = 'TESTA1';
SELECT * FROM STUDY_MEMBER ORDER BY ID DESC;
SELECT * FROM STUDY_MEMBER WHERE EMAIL= 'a2@test.com';
